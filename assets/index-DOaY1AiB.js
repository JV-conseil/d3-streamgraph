(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();function Ht(e){return e`<div style="color: grey; font: 13px/25.5px var(--sans-serif); text-transform: uppercase;"><h1 style="display: none;">Color legend</h1><a href="https://d3js.org/">D3</a> › <a href="/@d3/gallery">Gallery</a></div>

# Color legend

A simple legend for a [color scale](/@d3/color-schemes). Supports [continuous](/@d3/continuous-scales), [sequential](/@d3/sequential-scales), [diverging](/@d3/diverging-scales), [quantize, quantile, threshold](/@d3/quantile-quantize-and-threshold-scales) and [ordinal](/@d3/d3-scaleordinal) scales. To use:

~~~js
import {Legend, Swatches} from "@d3/color-legend"
~~~

Then call the legend function as shown below. (For ordinal scales, also consider the swatches function.)`}function Wt(e,t){return e(t.scaleSequential([0,100],t.interpolateViridis),{title:"Temperature (°F)"})}function Gt(e,t){return e(t.scaleSequentialSqrt([0,1],t.interpolateTurbo),{title:"Speed (kts)"})}function Vt(e,t){return e(t.scaleDiverging([-.1,0,.1],t.interpolatePiYG),{title:"Daily change",tickFormat:"+%"})}function Yt(e,t){return e(t.scaleDivergingSqrt([-.1,0,.1],t.interpolateRdBu),{title:"Daily change",tickFormat:"+%"})}function Zt(e,t){return e(t.scaleSequentialLog([1,100],t.interpolateBlues),{title:"Energy (joules)",ticks:10})}function Jt(e,t){return e(t.scaleSequentialQuantile(t.range(100).map(()=>Math.random()**2),t.interpolateBlues),{title:"Quantile",tickFormat:".2f"})}function Kt(e,t){return e(t.scaleSqrt([-100,0,100],["blue","white","red"]),{title:"Temperature (°C)"})}function Qt(e,t){return e(t.scaleQuantize([1,10],t.schemePurples[9]),{title:"Unemployment rate (%)"})}function Xt(e,t){return e(t.scaleQuantile(t.range(1e3).map(t.randomNormal(100,20)),t.schemeSpectral[9]),{title:"Height (cm)",tickFormat:".0f"})}function en(e,t){return e(t.scaleThreshold([2.5,3.1,3.5,3.9,6,7,8,9.5],t.schemeRdBu[9]),{title:"Unemployment rate (%)",tickSize:0})}function tn(e,t){return e(t.scaleOrdinal(["<10","10-19","20-29","30-39","40-49","50-59","60-69","70-79","≥80"],t.schemeSpectral[10]),{title:"Age (years)",tickSize:0})}function nn(e){return e`But wait, there’s more!

How about swatches for ordinal color scales? Both variable-width swatches and [column layout](https://developer.mozilla.org/en-US/docs/Web/CSS/columns) are supported.`}function rn(e,t){return e(t.scaleOrdinal(["blueberries","oranges","apples"],t.schemeCategory10))}function an(e,t){return e(t.scaleOrdinal(["Wholesale and Retail Trade","Manufacturing","Leisure and hospitality","Business services","Construction","Education and Health","Government","Finance","Self-employed","Other"],t.schemeTableau10),{columns:"180px"})}function on(e){return e`---

## Implementation`}function sn(e){return function(n,{title:r,tickSize:a=6,width:i=320,height:o=44+a,marginTop:s=18,marginRight:c=0,marginBottom:l=16+a,marginLeft:f=0,ticks:u=i/64,tickFormat:p,tickValues:b}={}){function m(v,w=256){const g=document.createElement("canvas");g.width=w,g.height=1;const x=g.getContext("2d");for(let T=0;T<w;++T)x.fillStyle=v(T/(w-1)),x.fillRect(T,0,1,1);return g}const h=e.create("svg").attr("width",i).attr("height",o).attr("viewBox",[0,0,i,o]).style("overflow","visible").style("display","block");let y=v=>v.selectAll(".tick line").attr("y1",s+l-o),d;if(n.interpolate){const v=Math.min(n.domain().length,n.range().length);d=n.copy().rangeRound(e.quantize(e.interpolate(f,i-c),v)),h.append("image").attr("x",f).attr("y",s).attr("width",i-f-c).attr("height",o-s-l).attr("preserveAspectRatio","none").attr("xlink:href",m(n.copy().domain(e.quantize(e.interpolate(0,1),v))).toDataURL())}else if(n.interpolator){if(d=Object.assign(n.copy().interpolator(e.interpolateRound(f,i-c)),{range(){return[f,i-c]}}),h.append("image").attr("x",f).attr("y",s).attr("width",i-f-c).attr("height",o-s-l).attr("preserveAspectRatio","none").attr("xlink:href",m(n.interpolator()).toDataURL()),!d.ticks){if(b===void 0){const v=Math.round(u+1);b=e.range(v).map(w=>e.quantile(n.domain(),w/(v-1)))}typeof p!="function"&&(p=e.format(p===void 0?",f":p))}}else if(n.invertExtent){const v=n.thresholds?n.thresholds():n.quantiles?n.quantiles():n.domain(),w=p===void 0?g=>g:typeof p=="string"?e.format(p):p;d=e.scaleLinear().domain([-1,n.range().length-1]).rangeRound([f,i-c]),h.append("g").selectAll("rect").data(n.range()).join("rect").attr("x",(g,x)=>d(x-1)).attr("y",s).attr("width",(g,x)=>d(x)-d(x-1)).attr("height",o-s-l).attr("fill",g=>g),b=e.range(v.length),p=g=>w(v[g],g)}else d=e.scaleBand().domain(n.domain()).rangeRound([f,i-c]),h.append("g").selectAll("rect").data(n.domain()).join("rect").attr("x",d).attr("y",s).attr("width",Math.max(0,d.bandwidth()-1)).attr("height",o-s-l).attr("fill",n),y=()=>{};return h.append("g").attr("transform",`translate(0,${o-l})`).call(e.axisBottom(d).ticks(u,typeof p=="string"?p:void 0).tickFormat(typeof p=="function"?p:void 0).tickSize(a).tickValues(b)).call(y).call(v=>v.select(".domain").remove()).call(v=>v.append("text").attr("x",f).attr("y",s+l-o-6).attr("fill","currentColor").attr("text-anchor","start").attr("font-weight","bold").attr("class","title").text(r)),h.node()}}function cn(e){return function({color:n,...r}){return e(n,r)}}function ln(e,t){return function(r,{columns:a=null,format:i,unknown:o,swatchSize:s=15,swatchWidth:c=s,swatchHeight:l=s,marginLeft:f=0}={}){const u=`-swatches-${Math.random().toString(16).slice(2)}`,p=o==null?void 0:r.unknown(),b=p==null||p===e.scaleImplicit?[]:[p],m=r.domain().concat(b);return i===void 0&&(i=h=>h===p?o:h),a!==null?t.html`<div style="display: flex; align-items: center; margin-left: ${+f}px; min-height: 33px; font: 10px sans-serif;">
  <style>

.${u}-item {
  break-inside: avoid;
  display: flex;
  align-items: center;
  padding-bottom: 1px;
}

.${u}-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: calc(100% - ${+c}px - 0.5em);
}

.${u}-swatch {
  width: ${+c}px;
  height: ${+l}px;
  margin: 0 0.5em 0 0;
}

  </style>
  <div style=${{width:"100%",columns:a}}>${m.map(h=>{const y=`${i(h)}`;return t.html`<div class=${u}-item>
      <div class=${u}-swatch style=${{background:r(h)}}></div>
      <div class=${u}-label title=${y}>${y}</div>
    </div>`})}
  </div>
</div>`:t.html`<div style="display: flex; align-items: center; min-height: 33px; margin-left: ${+f}px; font: 10px sans-serif;">
  <style>

.${u} {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}

.${u}::before {
  content: "";
  width: ${+c}px;
  height: ${+l}px;
  margin-right: 0.5em;
  background: var(--color);
}

  </style>
  <div>${m.map(h=>t.html`<span class="${u}" style="--color: ${r(h)}">${i(h)}</span>`)}</div>`}}function un(e){return function({color:n,...r}){return e(n,r)}}function fn(e,t){const n=e.module();return n.variable(t()).define(["md"],Ht),n.variable(t()).define(["Legend","d3"],Wt),n.variable(t()).define(["Legend","d3"],Gt),n.variable(t()).define(["Legend","d3"],Vt),n.variable(t()).define(["Legend","d3"],Yt),n.variable(t()).define(["Legend","d3"],Zt),n.variable(t()).define(["Legend","d3"],Jt),n.variable(t()).define(["Legend","d3"],Kt),n.variable(t()).define(["Legend","d3"],Qt),n.variable(t()).define(["Legend","d3"],Xt),n.variable(t()).define(["Legend","d3"],en),n.variable(t()).define(["Legend","d3"],tn),n.variable(t()).define(["md"],nn),n.variable(t()).define(["Swatches","d3"],rn),n.variable(t()).define(["Swatches","d3"],an),n.variable(t()).define(["md"],on),n.variable(t("Legend")).define("Legend",["d3"],sn),n.variable(t("legend")).define("legend",["Legend"],cn),n.variable(t("Swatches")).define("Swatches",["d3","htl"],ln),n.variable(t("swatches")).define("swatches",["Swatches"],un),n}function dn(e){return e`<div style="color: grey; font: 13px/25.5px var(--sans-serif); text-transform: uppercase;"><h1 style="display: none;">Streamgraph</h1><a href="https://d3js.org/">D3</a> › <a href="/@d3/gallery">Gallery</a></div>

# EU Grants H2020 & HORIZON Streamgraph

<!--
This stacked area chart shows grants persons by cluster, 2000–2010. Data: [BLS](https://www.bls.gov/)
-->

This stacked area chart shows EU grants by cluster for H2020 and HORIZON, 2014–2025. Data: [EU](https://www.europa.eu/)`}function pn(e,t){return e(t.scales.color,{columns:"180px"})}function mn(e,t){const c=e.stack().offset(e.stackOffsetSilhouette).order(e.stackOrderInsideOut).keys(e.union(t.map(m=>m.cluster))).value(([,m],h)=>m.get(h).grants)(e.index(t,m=>m.date,m=>m.cluster)),l=e.scaleUtc().domain(e.extent(t,m=>m.date)).range([40,1590]),f=e.scaleLinear().domain(e.extent(c.flat(2))).rangeRound([380,10]),u=e.scaleOrdinal().domain(c.map(m=>m.key)).range(e.schemeTableau10),p=e.area().x(m=>l(m.data[0])).y0(m=>f(m[0])).y1(m=>f(m[1])).curve(e.curveBasis),b=e.create("svg").attr("viewBox",[0,0,1600,400]).attr("width",1600).attr("height",400).attr("style","max-width: 100%; height: auto;");return b.append("g").attr("transform","translate(40,0)").call(e.axisLeft(f).ticks(400/80).tickFormat(m=>Math.abs(m).toLocaleString("en-US"))).call(m=>m.select(".domain").remove()).call(m=>m.selectAll(".tick line").clone().attr("x2",1550).attr("stroke-opacity",.1)).call(m=>m.append("text").attr("x",-40).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text("↑ Grants")),b.append("g").attr("transform","translate(0,380)").call(e.axisBottom(l).tickSizeOuter(0)).call(m=>m.select(".domain").remove()),b.append("g").selectAll().data(c).join("path").attr("fill",m=>u(m.key)).attr("d",p).append("title").text(m=>m.key),Object.assign(b.node(),{scales:{color:u}})}function hn(e){return e("dataset.csv").csv({typed:!0})}function bn(e,t){const n=e.module();function r(){return this.url}const a=new Map([["dataset.csv",{url:new URL("/assets/agg_nbcalls_cluster_01_05_2024-C-EwOqkm.csv",import.meta.url),mimeType:"text/csv",toString:r}]]);n.builtin("FileAttachment",e.fileAttachments(o=>a.get(o))),n.variable(t()).define(["md"],dn),n.variable(t("key")).define("key",["Swatches","chart"],pn),n.variable(t("chart")).define("chart",["d3","data"],mn),n.variable(t("data")).define("data",["FileAttachment"],hn);const i=e.module(fn);return n.import("Swatches",i),n}const yn="modulepreload",vn=function(e){return"/"+e},Pe={},ae=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.all(n.map(s=>{if(s=vn(s),s in Pe)return;Pe[s]=!0;const c=s.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${l}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":yn,c||(f.as="script",f.crossOrigin=""),f.href=s,o&&f.setAttribute("nonce",o),document.head.appendChild(f),c)return new Promise((u,p)=>{f.addEventListener("load",u),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${s}`)))})}))}return a.then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};function ie(e,t,n){n=n||{};var r=e.ownerDocument,a=r.defaultView.CustomEvent;typeof a=="function"?a=new a(t,{detail:n}):((a=r.createEvent("Event")).initEvent(t,!1,!1),a.detail=n),e.dispatchEvent(a)}function ft(e){return Array.isArray(e)||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function dt(e){return e===(0|e)+""}function $(e){const t=document.createElement("span");return t.className="observablehq--cellname",t.textContent=`${e} = `,t}const wn=Symbol.prototype.toString;function z(e){return wn.call(e)}const{getOwnPropertySymbols:gn,prototype:{hasOwnProperty:_n}}=Object,{toStringTag:En}=Symbol,pt={},Z=gn;function de(e,t){return _n.call(e,t)}function Ee(e){return e[En]||e.constructor&&e.constructor.name||"Object"}function S(e,t){try{const n=e[t];return n&&n.constructor,n}catch{return pt}}const xn=[{symbol:"@@__IMMUTABLE_INDEXED__@@",name:"Indexed",modifier:!0},{symbol:"@@__IMMUTABLE_KEYED__@@",name:"Keyed",modifier:!0},{symbol:"@@__IMMUTABLE_LIST__@@",name:"List",arrayish:!0},{symbol:"@@__IMMUTABLE_MAP__@@",name:"Map"},{symbol:"@@__IMMUTABLE_ORDERED__@@",name:"Ordered",modifier:!0,prefix:!0},{symbol:"@@__IMMUTABLE_RECORD__@@",name:"Record"},{symbol:"@@__IMMUTABLE_SET__@@",name:"Set",arrayish:!0,setish:!0},{symbol:"@@__IMMUTABLE_STACK__@@",name:"Stack",arrayish:!0}];function mt(e){try{let t=xn.filter(({symbol:o})=>e[o]===!0);if(!t.length)return;const n=t.find(o=>!o.modifier),r=n.name==="Map"&&t.find(o=>o.modifier&&o.prefix),a=t.some(o=>o.arrayish),i=t.some(o=>o.setish);return{name:`${r?r.name:""}${n.name}`,symbols:t,arrayish:a&&!i,setish:i}}catch{return null}}const{getPrototypeOf:je,getOwnPropertyDescriptors:Cn}=Object,ht=je({});function bt(e,t,n,r){let a,i,o,s,c=ft(e);e instanceof Map?e instanceof e.constructor?(a=`Map(${e.size})`,i=Nn):(a="Map()",i=W):e instanceof Set?e instanceof e.constructor?(a=`Set(${e.size})`,i=An):(a="Set()",i=W):c?(a=`${e.constructor.name}(${e.length})`,i=$n):(s=mt(e))?(a=`Immutable.${s.name}${s.name==="Record"?"":`(${e.size})`}`,c=s.arrayish,i=s.arrayish?Tn:s.setish?Sn:jn):r?(a=Ee(e),i=qn):(a=Ee(e),i=W);const l=document.createElement("span");l.className="observablehq--expanded",n&&l.appendChild($(n));const f=l.appendChild(document.createElement("a"));f.innerHTML=`<svg width=8 height=8 class='observablehq--caret'>
    <path d='M4 7L0 1h8z' fill='currentColor' />
  </svg>`,f.appendChild(document.createTextNode(`${a}${c?" [":" {"}`)),f.addEventListener("mouseup",function(u){u.stopPropagation(),se(l,Oe(e,null,n,r))}),i=i(e);for(let u=0;!(o=i.next()).done&&u<20;++u)l.appendChild(o.value);if(!o.done){const u=l.appendChild(document.createElement("a"));u.className="observablehq--field",u.style.display="block",u.appendChild(document.createTextNode("  … more")),u.addEventListener("mouseup",function(p){p.stopPropagation(),l.insertBefore(o.value,l.lastChild.previousSibling);for(let b=0;!(o=i.next()).done&&b<19;++b)l.insertBefore(o.value,l.lastChild.previousSibling);o.done&&l.removeChild(l.lastChild.previousSibling),ie(l,"load")})}return l.appendChild(document.createTextNode(c?"]":"}")),l}function*Nn(e){for(const[t,n]of e)yield On(t,n);yield*W(e)}function*An(e){for(const t of e)yield vt(t);yield*W(e)}function*Sn(e){for(const t of e)yield vt(t)}function*$n(e){for(let t=0,n=e.length;t<n;++t)t in e&&(yield L(t,S(e,t),"observablehq--index"));for(const t in e)!dt(t)&&de(e,t)&&(yield L(t,S(e,t),"observablehq--key"));for(const t of Z(e))yield L(z(t),S(e,t),"observablehq--symbol")}function*Tn(e){let t=0;for(const n=e.size;t<n;++t)yield L(t,e.get(t),!0)}function*qn(e){for(const n in Cn(e))yield L(n,S(e,n),"observablehq--key");for(const n of Z(e))yield L(z(n),S(e,n),"observablehq--symbol");const t=je(e);t&&t!==ht&&(yield yt(t))}function*W(e){for(const n in e)de(e,n)&&(yield L(n,S(e,n),"observablehq--key"));for(const n of Z(e))yield L(z(n),S(e,n),"observablehq--symbol");const t=je(e);t&&t!==ht&&(yield yt(t))}function*jn(e){for(const[t,n]of e)yield L(t,n,"observablehq--key")}function yt(e){const t=document.createElement("div"),n=t.appendChild(document.createElement("span"));return t.className="observablehq--field",n.className="observablehq--prototype-key",n.textContent="  <prototype>",t.appendChild(document.createTextNode(": ")),t.appendChild(A(e,void 0,void 0,void 0,!0)),t}function L(e,t,n){const r=document.createElement("div"),a=r.appendChild(document.createElement("span"));return r.className="observablehq--field",a.className=n,a.textContent=`  ${e}`,r.appendChild(document.createTextNode(": ")),r.appendChild(A(t)),r}function On(e,t){const n=document.createElement("div");return n.className="observablehq--field",n.appendChild(document.createTextNode("  ")),n.appendChild(A(e)),n.appendChild(document.createTextNode(" => ")),n.appendChild(A(t)),n}function vt(e){const t=document.createElement("div");return t.className="observablehq--field",t.appendChild(document.createTextNode("  ")),t.appendChild(A(e)),t}function Ue(e){const t=window.getSelection();return t.type==="Range"&&(t.containsNode(e,!0)||t.anchorNode.isSelfOrDescendant(e)||t.focusNode.isSelfOrDescendant(e))}function Oe(e,t,n,r){let a,i,o,s,c=ft(e);if(e instanceof Map?e instanceof e.constructor?(a=`Map(${e.size})`,i=Ln):(a="Map()",i=G):e instanceof Set?e instanceof e.constructor?(a=`Set(${e.size})`,i=kn):(a="Set()",i=G):c?(a=`${e.constructor.name}(${e.length})`,i=In):(s=mt(e))?(a=`Immutable.${s.name}${s.name==="Record"?"":`(${e.size})`}`,c=s.arrayish,i=s.arrayish?Mn:s.setish?Rn:Pn):(a=Ee(e),i=G),t){const u=document.createElement("span");return u.className="observablehq--shallow",n&&u.appendChild($(n)),u.appendChild(document.createTextNode(a)),u.addEventListener("mouseup",function(p){Ue(u)||(p.stopPropagation(),se(u,Oe(e)))}),u}const l=document.createElement("span");l.className="observablehq--collapsed",n&&l.appendChild($(n));const f=l.appendChild(document.createElement("a"));f.innerHTML=`<svg width=8 height=8 class='observablehq--caret'>
    <path d='M7 4L1 8V0z' fill='currentColor' />
  </svg>`,f.appendChild(document.createTextNode(`${a}${c?" [":" {"}`)),l.addEventListener("mouseup",function(u){Ue(l)||(u.stopPropagation(),se(l,bt(e,0,n,r)))},!0),i=i(e);for(let u=0;!(o=i.next()).done&&u<20;++u)u>0&&l.appendChild(document.createTextNode(", ")),l.appendChild(o.value);return o.done||l.appendChild(document.createTextNode(", …")),l.appendChild(document.createTextNode(c?"]":"}")),l}function*Ln(e){for(const[t,n]of e)yield Un(t,n);yield*G(e)}function*kn(e){for(const t of e)yield A(t,!0);yield*G(e)}function*Rn(e){for(const t of e)yield A(t,!0)}function*Mn(e){let t=-1,n=0;for(const r=e.size;n<r;++n)n>t+1&&(yield oe(n-t-1)),yield A(e.get(n),!0),t=n;n>t+1&&(yield oe(n-t-1))}function*In(e){let t=-1,n=0;for(const r=e.length;n<r;++n)n in e&&(n>t+1&&(yield oe(n-t-1)),yield A(S(e,n),!0),t=n);n>t+1&&(yield oe(n-t-1));for(const r in e)!dt(r)&&de(e,r)&&(yield V(r,S(e,r),"observablehq--key"));for(const r of Z(e))yield V(z(r),S(e,r),"observablehq--symbol")}function*G(e){for(const t in e)de(e,t)&&(yield V(t,S(e,t),"observablehq--key"));for(const t of Z(e))yield V(z(t),S(e,t),"observablehq--symbol")}function*Pn(e){for(const[t,n]of e)yield V(t,n,"observablehq--key")}function oe(e){const t=document.createElement("span");return t.className="observablehq--empty",t.textContent=e===1?"empty":`empty × ${e}`,t}function V(e,t,n){const r=document.createDocumentFragment(),a=r.appendChild(document.createElement("span"));return a.className=n,a.textContent=e,r.appendChild(document.createTextNode(": ")),r.appendChild(A(t,!0)),r}function Un(e,t){const n=document.createDocumentFragment();return n.appendChild(A(e,!0)),n.appendChild(document.createTextNode(" => ")),n.appendChild(A(t,!0)),n}function Dn(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),a=e.getUTCSeconds(),i=e.getUTCMilliseconds();return`${o=e.getUTCFullYear(),o<0?`-${q(-o,6)}`:o>9999?`+${q(o,6)}`:q(o,4)}-${q(e.getUTCMonth()+1,2)}-${q(e.getUTCDate(),2)}${n||r||a||i?`T${q(n,2)}:${q(r,2)}${a||i?`:${q(a,2)}${i?`.${q(i,3)}`:""}`:""}Z`:""}`;var o}function q(e,t){return`${e}`.padStart(t,"0")}var Bn=Error.prototype.toString,Fn=RegExp.prototype.toString;function De(e){return e.replace(/[\\`\x00-\x09\x0b-\x19]|\${/g,zn)}function zn(e){var t=e.charCodeAt(0);switch(t){case 8:return"\\b";case 9:return"\\t";case 11:return"\\v";case 12:return"\\f";case 13:return"\\r"}return t<16?"\\x0"+t.toString(16):t<32?"\\x"+t.toString(16):"\\"+e}function Be(e,t){for(var n=0;t.exec(e);)++n;return n}var Hn=Function.prototype.toString,Wn={prefix:"async ƒ"},Gn={prefix:"async ƒ*"},Fe={prefix:"class"},Vn={prefix:"ƒ"},Yn={prefix:"ƒ*"};function X(e,t,n){var r=document.createElement("span");r.className="observablehq--function",n&&r.appendChild($(n));var a=r.appendChild(document.createElement("span"));return a.className="observablehq--keyword",a.textContent=e.prefix,r.appendChild(document.createTextNode(t)),r}const{prototype:{toString:Zn}}=Object;function A(e,t,n,r,a){let i=typeof e;switch(i){case"boolean":case"undefined":e+="";break;case"number":e=e===0&&1/e<0?"-0":e+"";break;case"bigint":e+="n";break;case"symbol":e=z(e);break;case"function":return function(c,l){var f,u,p=Hn.call(c);switch(c.constructor&&c.constructor.name){case"AsyncFunction":f=Wn;break;case"AsyncGeneratorFunction":f=Gn;break;case"GeneratorFunction":f=Yn;break;default:f=/^class\b/.test(p)?Fe:Vn}return f===Fe?X(f,"",l):(u=/^(?:async\s*)?(\w+)\s*=>/.exec(p))?X(f,"("+u[1]+")",l):(u=/^(?:async\s*)?\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(p))||(u=/^(?:async\s*)?function(?:\s*\*)?(?:\s*\w+)?\s*\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(p))?X(f,u[1]?"("+u[1].replace(/\s*,\s*/g,", ")+")":"()",l):X(f,"(…)",l)}(e,r);case"string":return function(c,l,f,u){if(l===!1){if(Be(c,/["\n]/g)<=Be(c,/`|\${/g)){const d=document.createElement("span");u&&d.appendChild($(u));const v=d.appendChild(document.createElement("span"));return v.className="observablehq--string",v.textContent=JSON.stringify(c),d}const m=c.split(`
`);if(m.length>20&&!f){const d=document.createElement("div");u&&d.appendChild($(u));const v=d.appendChild(document.createElement("span"));v.className="observablehq--string",v.textContent="`"+De(m.slice(0,20).join(`
`));const w=d.appendChild(document.createElement("span")),g=m.length-20;return w.textContent=`Show ${g} truncated line${g>1?"s":""}`,w.className="observablehq--string-expand",w.addEventListener("mouseup",function(x){x.stopPropagation(),se(d,A(c,l,!0,u))}),d}const h=document.createElement("span");u&&h.appendChild($(u));const y=h.appendChild(document.createElement("span"));return y.className="observablehq--string"+(f?" observablehq--expanded":""),y.textContent="`"+De(c)+"`",h}const p=document.createElement("span");u&&p.appendChild($(u));const b=p.appendChild(document.createElement("span"));return b.className="observablehq--string",b.textContent=JSON.stringify(c.length>100?`${c.slice(0,50)}…${c.slice(-49)}`:c),p}(e,t,n,r);default:if(e===null){i=null,e="null";break}if(e instanceof Date){i="date",e=Dn(e,"Invalid Date");break}if(e===pt){i="forbidden",e="[forbidden]";break}switch(Zn.call(e)){case"[object RegExp]":i="regexp",e=function(c){return Fn.call(c)}(e);break;case"[object Error]":case"[object DOMException]":i="error",e=function(c){return c.stack||Bn.call(c)}(e);break;default:return(n?bt:Oe)(e,t,r,a)}}const o=document.createElement("span");r&&o.appendChild($(r));const s=o.appendChild(document.createElement("span"));return s.className=`observablehq--${i}`,s.textContent=e,o}function se(e,t){e.classList.contains("observablehq--inspect")&&t.classList.add("observablehq--inspect"),e.parentNode.replaceChild(t,e),ie(t,"load")}const Jn=/\s+\(\d+:\d+\)$/m;class xe{constructor(t){if(!t)throw new Error("invalid node");this._node=t,t.classList.add("observablehq")}pending(){const{_node:t}=this;t.classList.remove("observablehq--error"),t.classList.add("observablehq--running")}fulfilled(t,n){const{_node:r}=this;if((!function(a){return(a instanceof Element||a instanceof Text)&&a instanceof a.constructor}(t)||t.parentNode&&t.parentNode!==r)&&(t=A(t,!1,r.firstChild&&r.firstChild.classList&&r.firstChild.classList.contains("observablehq--expanded"),n)).classList.add("observablehq--inspect"),r.classList.remove("observablehq--running","observablehq--error"),r.firstChild!==t)if(r.firstChild){for(;r.lastChild!==r.firstChild;)r.removeChild(r.lastChild);r.replaceChild(t,r.firstChild)}else r.appendChild(t);ie(r,"update")}rejected(t,n){const{_node:r}=this;for(r.classList.remove("observablehq--running"),r.classList.add("observablehq--error");r.lastChild;)r.removeChild(r.lastChild);var a=document.createElement("div");a.className="observablehq--inspect",n&&a.appendChild($(n)),a.appendChild(document.createTextNode((t+"").replace(Jn,""))),r.appendChild(a),ie(r,"error",{error:t})}}xe.into=function(e){if(typeof e=="string"&&(e=document.querySelector(e))==null)throw new Error("container not found");return function(){return new xe(e.appendChild(document.createElement("div")))}};var ze={},me={};function He(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function We(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var a in r)a in t||n.push(t[a]=a)}),n}function N(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Kn(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),a=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+N(-t,6):t>9999?"+"+N(t,6):N(t,4))+"-"+N(e.getUTCMonth()+1,2)+"-"+N(e.getUTCDate(),2)+(i?"T"+N(n,2)+":"+N(r,2)+":"+N(a,2)+"."+N(i,3)+"Z":a?"T"+N(n,2)+":"+N(r,2)+":"+N(a,2)+"Z":r||n?"T"+N(n,2)+":"+N(r,2)+"Z":"")}function wt(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(s,c){var l,f=[],u=s.length,p=0,b=0,m=u<=0,h=!1;function y(){if(m)return me;if(h)return h=!1,ze;var v,w,g=p;if(s.charCodeAt(g)===34){for(;p++<u&&s.charCodeAt(p)!==34||s.charCodeAt(++p)===34;);return(v=p)>=u?m=!0:(w=s.charCodeAt(p++))===10?h=!0:w===13&&(h=!0,s.charCodeAt(p)===10&&++p),s.slice(g+1,v-1).replace(/""/g,'"')}for(;p<u;){if((w=s.charCodeAt(v=p++))===10)h=!0;else if(w===13)h=!0,s.charCodeAt(p)===10&&++p;else if(w!==n)continue;return s.slice(g,v)}return m=!0,s.slice(g,u)}for(s.charCodeAt(u-1)===10&&--u,s.charCodeAt(u-1)===13&&--u;(l=y())!==me;){for(var d=[];l!==ze&&l!==me;)d.push(l),l=y();c&&(d=c(d,b++))==null||f.push(d)}return f}function a(s,c){return s.map(function(l){return c.map(function(f){return o(l[f])}).join(e)})}function i(s){return s.map(o).join(e)}function o(s){return s==null?"":s instanceof Date?Kn(s):t.test(s+="")?'"'+s.replace(/"/g,'""')+'"':s}return{parse:function(s,c){var l,f,u=r(s,function(p,b){if(l)return l(p,b-1);f=p,l=c?function(m,h){var y=He(m);return function(d,v){return h(y(d),v,m)}}(p,c):He(p)});return u.columns=f||[],u},parseRows:r,format:function(s,c){return c==null&&(c=We(s)),[c.map(o).join(e)].concat(a(s,c)).join(`
`)},formatBody:function(s,c){return c==null&&(c=We(s)),a(s,c).join(`
`)},formatRows:function(s){return s.map(i).join(`
`)},formatRow:i,formatValue:o}}var gt=wt(","),Qn=gt.parse,Xn=gt.parseRows,_t=wt("	"),er=_t.parse,tr=_t.parseRows;function nr(e){for(var t in e){var n,r,a=e[t].trim();if(a)if(a==="true")a=!0;else if(a==="false")a=!1;else if(a==="NaN")a=NaN;else if(isNaN(n=+a)){if(!(r=a.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;rr&&r[4]&&!r[7]&&(a=a.replace(/-/g,"/").replace(/T/," ")),a=new Date(a)}else a=n;else a=null;e[t]=a}return e}const rr=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function E(e,t,n){return{resolve:(r=n)=>`${e}@${t}/${r}`}}const ar=E("d3","7.9.0","dist/d3.min.js"),ir=E("@observablehq/inputs","0.10.6","dist/inputs.min.js"),or=E("@observablehq/plot","0.6.14","dist/plot.umd.min.js"),sr=E("@observablehq/graphviz","0.2.1","dist/graphviz.min.js"),he=E("@observablehq/highlight.js","2.0.0","highlight.min.js"),Ge=E("@observablehq/katex","0.11.1","dist/katex.min.js"),cr=E("lodash","4.17.21","lodash.min.js"),lr=E("htl","0.3.1","dist/htl.min.js"),ur=E("jszip","3.10.1","dist/jszip.min.js"),fr=E("marked","0.3.12","marked.min.js"),Ve=E("sql.js","1.8.0","dist/sql-wasm.js"),dr=E("vega","5.22.1","build/vega.min.js"),pr=E("vega-lite","5.6.0","build/vega-lite.min.js"),mr=E("vega-lite-api","5.0.0","build/vega-lite-api.min.js"),Ce=E("apache-arrow","4.0.1","Arrow.es2015.min.js"),hr=E("apache-arrow","9.0.0","+esm"),Et=E("apache-arrow","11.0.0","+esm"),br=E("arquero","4.8.8","dist/arquero.min.js"),yr=E("topojson-client","3.1.0","dist/topojson-client.min.js"),vr=E("exceljs","4.3.0","dist/exceljs.min.js"),wr=E("mermaid","9.2.2","dist/mermaid.min.js"),Ye=E("leaflet","1.9.3","dist/leaflet.js"),H=E("@duckdb/duckdb-wasm","1.24.0","+esm"),ee=new Map,J=[],Ne=J.map,gr=J.some,_r=J.hasOwnProperty,Er=/^((?:@[^/@]+\/)?[^/@]+)(?:@([^/]+))?(?:\/(.*))?$/,xr=/^\d+\.\d+\.\d+(-[\w-.+]+)?$/,Ze=/(?:\.[^/]*|\/)$/;class F extends Error{constructor(t){super(t)}}function Je(e){const t=Er.exec(e);return t&&{name:t[1],version:t[2],path:t[3]}}function xt(e="https://cdn.jsdelivr.net/npm/",t=["unpkg","jsdelivr","browser","main"]){if(!/\/$/.test(e))throw new Error("origin lacks trailing slash");function n(r){const a=`${e}${r.name}${r.version?`@${r.version}`:""}/package.json`;let i=ee.get(a);return i||ee.set(a,i=fetch(a).then(o=>{if(!o.ok)throw new F("unable to load package.json");return o.redirected&&!ee.has(o.url)&&ee.set(o.url,i),o.json()})),i}return async function(r,a){if(r.startsWith(e)&&(r=r.substring(e.length)),/^(\w+:)|\/\//i.test(r))return r;if(/^[.]{0,2}\//i.test(r))return new URL(r,a??location).href;if(!r.length||/^[\s._]/.test(r)||/\s$/.test(r))throw new F("illegal name");const i=Je(r);if(!i)return`${e}${r}`;if(!i.version&&a!=null&&a.startsWith(e)){const s=await n(Je(a.substring(e.length)));i.version=s.dependencies&&s.dependencies[i.name]||s.peerDependencies&&s.peerDependencies[i.name]}if(i.path&&!Ze.test(i.path)&&(i.path+=".js"),i.path&&i.version&&xr.test(i.version))return`${e}${i.name}@${i.version}/${i.path}`;const o=await n(i);return`${e}${o.name}@${o.version}/${i.path||function(s){for(const c of t){let l=s[c];if(typeof l=="string")return l.startsWith("./")&&(l=l.slice(2)),Ze.test(l)?l:`${l}.js`}}(o)||"index.js"}`}}F.prototype.name=F.name;var Cr=ce(xt());function ce(e){const t=new Map,n=a(null);function r(o){if(typeof o!="string")return o;let s=t.get(o);return s||t.set(o,s=new Promise((c,l)=>{const f=document.createElement("script");f.onload=()=>{try{c(J.pop()(a(o)))}catch{l(new F("invalid module"))}f.remove()},f.onerror=()=>{l(new F("unable to load module")),f.remove()},f.async=!0,f.src=o,window.define=Ct,document.head.appendChild(f)})),s}function a(o){return s=>Promise.resolve(e(s,o)).then(r)}function i(o){return arguments.length>1?Promise.all(Ne.call(arguments,n)).then(Nr):n(o)}return i.alias=function(o){return ce((s,c)=>s in o&&(c=null,typeof(s=o[s])!="string")?s:e(s,c))},i.resolve=e,i}function Nr(e){const t={};for(const n of e)for(const r in n)_r.call(n,r)&&(n[r]==null?Object.defineProperty(t,r,{get:Ar(n,r)}):t[r]=n[r]);return t}function Ar(e,t){return()=>e[t]}function Sr(e){return(e+="")=="exports"||e==="module"}function Ct(e,t,n){const r=arguments.length;r<2?(n=e,t=[]):r<3&&(n=t,t=typeof e=="string"?[]:e),J.push(gr.call(t,Sr)?a=>{const i={},o={exports:i};return Promise.all(Ne.call(t,s=>(s+="")=="exports"?i:s==="module"?o:a(s))).then(s=>(n.apply(null,s),o.exports))}:a=>Promise.all(Ne.call(t,a)).then(i=>typeof n=="function"?n.apply(null,i):n))}Ct.amd={};const I="https://cdn.observableusercontent.com/npm/";let be,P=Cr;async function Nt(e){const[t,n]=await Promise.all([e(Ve.resolve()),e.resolve(Ve.resolve("dist/"))]);return t({locateFile:r=>`${n}${r}`})}class K{constructor(t){Object.defineProperties(this,{_db:{value:t}})}static async open(t){const[n,r]=await Promise.all([Nt(P),Promise.resolve(t).then(Ae)]);return new K(new n.Database(r))}async query(t,n){return await async function(r,a,i){const[o]=await r.exec(a,i);if(!o)return[];const{columns:s,values:c}=o,l=c.map(f=>Object.fromEntries(f.map((u,p)=>[s[p],u])));return l.columns=s,l}(this._db,t,n)}async queryRow(t,n){return(await this.query(t,n))[0]||null}async explain(t,n){return M("pre",{className:"observablehq--inspect"},[ye((await this.query(`EXPLAIN QUERY PLAN ${t}`,n)).map(r=>r.detail).join(`
`))])}async describeTables({schema:t}={}){return this.query(`SELECT NULLIF(schema, 'main') AS schema, name FROM pragma_table_list() WHERE type = 'table'${t==null?"":" AND schema = ?"} AND name NOT LIKE 'sqlite_%' ORDER BY schema, name`,t==null?[]:[t])}async describeColumns({schema:t,table:n}={}){if(n==null)throw new Error("missing table");const r=await this.query(`SELECT name, type, "notnull" FROM pragma_table_info(?${t==null?"":", ?"}) ORDER BY cid`,t==null?[n]:[n,t]);if(!r.length)throw new Error(`table not found: ${n}`);return r.map(({name:a,type:i,notnull:o})=>({name:a,type:$r(i),databaseType:i,nullable:!o}))}async describe(t){const n=await(t===void 0?this.query("SELECT name FROM sqlite_master WHERE type = 'table'"):this.query("SELECT * FROM pragma_table_info(?)",[t]));if(!n.length)throw new Error("Not found");const{columns:r}=n;return M("table",{value:n},[M("thead",[M("tr",r.map(a=>M("th",[ye(a)])))]),M("tbody",n.map(a=>M("tr",r.map(i=>M("td",[ye(a[i])])))))])}async sql(){return this.query(...this.queryTag.apply(this,arguments))}queryTag(t,...n){return[t.join("?"),n]}}function $r(e){switch(e){case"NULL":return"null";case"INT":case"INTEGER":case"TINYINT":case"SMALLINT":case"MEDIUMINT":case"BIGINT":case"UNSIGNED BIG INT":case"INT2":case"INT8":return"integer";case"TEXT":case"CLOB":case"DATE":case"DATETIME":return"string";case"REAL":case"DOUBLE":case"DOUBLE PRECISION":case"FLOAT":case"NUMERIC":return"number";case"BLOB":return"buffer";default:return/^(?:(?:(?:VARYING|NATIVE) )?CHARACTER|(?:N|VAR|NVAR)CHAR)\(/.test(e)?"string":/^(?:DECIMAL|NUMERIC)\(/.test(e)?"number":"other"}}function Ae(e){return typeof e=="string"?fetch(e).then(Ae):e instanceof Response||e instanceof Blob?e.arrayBuffer().then(Ae):e instanceof ArrayBuffer?new Uint8Array(e):e}function M(e,t,n){arguments.length===2&&(n=t,t=void 0);const r=document.createElement(e);if(t!==void 0)for(const a in t)r[a]=t[a];if(n!==void 0)for(const a of n)r.appendChild(a);return r}function ye(e){return document.createTextNode(e)}function ve(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Tr(e,t=ve){let n,r=!1;if(t.length===1){let a;for(const i of e){const o=t(i);(r?ve(o,a)>0:ve(o,o)===0)&&(n=i,a=o,r=!0)}}else for(const a of e)(r?t(a,n)>0:t(a,a)===0)&&(n=a,r=!0);return n}function Le(e){return e&&typeof e.toArrowBuffer=="function"}function le(e){return e&&typeof e.getChild=="function"&&typeof e.toArray=="function"&&e.schema&&Array.isArray(e.schema.fields)}function qr(e){return{name:e.name,type:jr(e.type),nullable:e.nullable,databaseType:String(e.type)}}function jr(e){switch(e.typeId){case 2:return"integer";case 3:case 7:return"number";case 4:case 15:return"buffer";case 5:return"string";case 6:return"boolean";case 8:case 9:case 10:return"date";case 12:case 16:return"array";case 13:case 14:return"object";default:return"other"}}async function ke(){return await ae(()=>import(`${I}${Et.resolve()}`),[])}Object.defineProperty(K.prototype,"dialect",{value:"sqlite"});class Q{constructor(t){Object.defineProperties(this,{_db:{value:t}})}async queryStream(t,n){const r=await this._db.connect();let a,i;try{if((n==null?void 0:n.length)>0?a=await(await r.prepare(t)).send(...n):a=await r.send(t),i=await a.next(),i.done)throw new Error("missing first batch")}catch(s){throw await r.close(),s}return{schema:(o=i.value,o.schema.fields.map(qr)),async*readRows(){try{for(;!i.done;)yield i.value.toArray(),i=await a.next()}finally{await r.close()}}};var o}async query(t,n){const r=await this.queryStream(t,n),a=[];for await(const i of r.readRows())for(const o of i)a.push(o);return a.schema=r.schema,a}async queryRow(t,n){const r=(await this.queryStream(t,n)).readRows();try{const{done:a,value:i}=await r.next();return a||!i.length?null:i[0]}finally{await r.return()}}async sql(t,...n){return await this.query(t.join("?"),n)}queryTag(t,...n){return[t.join("?"),n]}escape(t){return`"${t}"`}async describeTables(){return(await this.query("SHOW TABLES")).map(({name:t})=>({name:t}))}async describeColumns({table:t}={}){return(await this.query(`DESCRIBE ${this.escape(t)}`)).map(({column_name:n,column_type:r,null:a})=>({name:n,type:Or(r),nullable:a!=="NO",databaseType:r}))}static async of(t={},n={}){var a,i;const r=await async function(){be===void 0&&(be=async function(){const u=await ae(()=>import(`${I}${H.resolve()}`),[]),p=await u.selectBundle({mvp:{mainModule:`${I}${H.resolve("dist/duckdb-mvp.wasm")}`,mainWorker:`${I}${H.resolve("dist/duckdb-browser-mvp.worker.js")}`},eh:{mainModule:`${I}${H.resolve("dist/duckdb-eh.wasm")}`,mainWorker:`${I}${H.resolve("dist/duckdb-browser-eh.worker.js")}`}}),b=new u.ConsoleLogger;return{module:u,bundle:p,logger:b}}());const{module:o,bundle:s,logger:c}=await be,l=await o.createWorker(s.mainWorker),f=new o.AsyncDuckDB(c,l);return await f.instantiate(s.mainModule),f}();return((a=n.query)==null?void 0:a.castTimestampToDate)===void 0&&(n={...n,query:{...n.query,castTimestampToDate:!0}}),((i=n.query)==null?void 0:i.castBigIntToDouble)===void 0&&(n={...n,query:{...n.query,castBigIntToDouble:!0}}),await r.open(n),await Promise.all(Object.entries(t).map(async([o,s])=>{if(s instanceof C)await Ke(r,o,s);else if(le(s))await ne(r,o,s);else if(Array.isArray(s))await Qe(r,o,s);else if(Le(s))await async function(c,l,f){const u=(await ke()).tableFromIPC(f.toArrowBuffer());return await ne(c,l,u)}(r,o,s);else if("data"in s){const{data:c,...l}=s;le(c)?await ne(r,o,c,l):await Qe(r,o,c,l)}else{if(!("file"in s))throw new Error(`invalid source: ${s}`);{const{file:c,...l}=s;await Ke(r,o,c,l)}}})),new Q(r)}}async function Ke(e,t,n,r){const a=await n.url();if(a.startsWith("blob:")){const o=await n.arrayBuffer();await e.registerFileBuffer(n.name,new Uint8Array(o))}else await e.registerFileURL(n.name,new URL(a,location).href,4);const i=await e.connect();try{switch(n.mimeType){case"text/csv":case"text/tab-separated-values":return await i.insertCSVFromPath(n.name,{name:t,schema:"main",...r}).catch(async o=>{if(o.toString().includes("Could not convert"))return await async function(s,c,l){return await(await s.prepare(`CREATE TABLE '${l}' AS SELECT * FROM read_csv_auto(?, ALL_VARCHAR=TRUE)`)).send(c.name)}(i,n,t);throw o});case"application/json":return await i.insertJSONFromPath(n.name,{name:t,schema:"main",...r});default:if(/\.arrow$/i.test(n.name)){const o=new Uint8Array(await n.arrayBuffer());return await i.insertArrowFromIPCStream(o,{name:t,schema:"main",...r})}if(/\.parquet$/i.test(n.name))return await i.query(`CREATE VIEW '${t}' AS SELECT * FROM parquet_scan('${n.name}')`);throw new Error(`unknown file type: ${n.mimeType}`)}}finally{await i.close()}}async function ne(e,t,n,r){const a=await e.connect();try{await a.insertArrowTable(n,{name:t,schema:"main",...r})}finally{await a.close()}}async function Qe(e,t,n,r){const a=(await ke()).tableFromJSON(n);return await ne(e,t,a,r)}function Or(e){switch(e){case"BIGINT":case"HUGEINT":case"UBIGINT":return"bigint";case"DOUBLE":case"REAL":case"FLOAT":return"number";case"INTEGER":case"SMALLINT":case"TINYINT":case"USMALLINT":case"UINTEGER":case"UTINYINT":return"integer";case"BOOLEAN":return"boolean";case"DATE":case"TIMESTAMP":case"TIMESTAMP WITH TIME ZONE":return"date";case"VARCHAR":case"UUID":return"string";default:return/^DECIMAL\(/.test(e)?"integer":"other"}}Object.defineProperty(Q.prototype,"dialect",{value:"duckdb"});function pe(e){return Array.isArray(e)&&(At(e.schema)||St(e.columns)||function(t){const n=Math.min(20,t.length);for(let r=0;r<n;++r){const a=t[r];if(a===null||typeof a!="object")return!1}return n>0&&function(r){for(const a in r)return!0;return!1}(t[0])}(e)||Tt(e)||qt(e))||jt(e)}function At(e){return Array.isArray(e)&&e.every(Lr)}function St(e){return Array.isArray(e)&&e.every(t=>typeof t=="string")}function Lr(e){return e&&typeof e.name=="string"&&typeof e.type=="string"}function $t(e){return jt(e)||Tt(e)||qt(e)}function Tt(e){const t=Math.min(20,e.length);if(!(t>0))return!1;let n,r=!1;for(let a=0;a<t;++a){const i=e[a];if(i==null)continue;const o=typeof i;if(n===void 0)switch(o){case"number":case"boolean":case"string":case"bigint":n=o;break;default:return!1}else if(o!==n)return!1;r=!0}return r}function qt(e){const t=Math.min(20,e.length);if(!(t>0))return!1;let n=!1;for(let r=0;r<t;++r){const a=e[r];if(a!=null){if(!(a instanceof Date))return!1;n=!0}}return n}function jt(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}const Ot=Object.assign(async(e,t,n,r)=>{if(e=await kr(await e,r),(a=e)&&(typeof a.sql=="function"||typeof a.queryTag=="function"&&(typeof a.query=="function"||typeof a.queryStream=="function"))&&(i!=="table"||typeof a.describeColumns=="function")&&a!==Ot)return Xe(e,function(o,s){var y;const c=typeof s.escape=="function"?s.escape:d=>d,{select:l,from:f,filter:u,sort:p,slice:b}=o;if(!f.table)throw new Error("missing from table");if(l.columns&&l.columns.length===0)throw new Error("at least one column must be selected");const m=new Map((y=o.names)==null?void 0:y.map(({column:d,name:v})=>[d,v])),h=[[`SELECT ${l.columns?l.columns.map(d=>{const v=m.get(d);return v?`${c(d)} AS ${c(v)}`:c(d)}).join(", "):"*"} FROM ${Mr(f.table,c)}`]];for(let d=0;d<u.length;++d)_(d?`
AND `:`
WHERE `,h),Ir(u[d],h,c);for(let d=0;d<p.length;++d)_(d?", ":`
ORDER BY `,h),et(p[d],h,c);if(s.dialect==="mssql"||s.dialect==="oracle"){if(b.to!==null||b.from!==null){if(!p.length){if(!l.columns)throw new Error("at least one column must be explicitly specified. Received '*'.");_(`
ORDER BY `,h),et({column:l.columns[0],direction:"ASC"},h,c)}_(`
OFFSET ${b.from||0} ROWS`,h),_(`
FETCH NEXT ${b.to!==null?b.to-(b.from||0):1e9} ROWS ONLY`,h)}}else b.to===null&&b.from===null||_(`
LIMIT `+(b.to!==null?b.to-(b.from||0):1e9),h),b.from!==null&&_(` OFFSET ${b.from}`,h);return h}(t,e),n);var a,i;if(pe(e))return function(o,s){const c=new Map,l=o,f=nt(o,s);o=f.source;let u=f.schema;if(s.derive){const h=[];s.derive.map(({name:d,value:v})=>{let w=[];rt(o,s).map((g,x)=>{let T;try{T=v(g)}catch(zt){w.push({index:x,error:zt}),T=void 0}h[x]?h[x]={...h[x],[d]:T}:h.push({[d]:T})}),w.length&&c.set(d,w)});const y=nt(h,s);o=o.map((d,v)=>({...d,...y.source[v]})),u=[...u,...y.schema]}for(const{type:h,operands:y}of s.filter){const[{value:d}]=y,v=y.slice(1).map(({value:w})=>w);switch(h){case"v":{const[w]=v,g=tt(w);o=o.filter(x=>g(x[d]));break}case"nv":{const[w]=v,g=tt(w);o=o.filter(x=>!g(x[d]));break}case"eq":{const[w]=v;if(w instanceof Date){const g=+w;o=o.filter(x=>+x[d]===g)}else o=o.filter(g=>g[d]===w);break}case"ne":{const[w]=v;o=o.filter(g=>g[d]!==w);break}case"c":{const[w]=v;o=o.filter(g=>typeof g[d]=="string"&&g[d].includes(w));break}case"nc":{const[w]=v;o=o.filter(g=>typeof g[d]=="string"&&!g[d].includes(w));break}case"in":{const w=new Set(v);o=o.filter(g=>w.has(g[d]));break}case"nin":{const w=new Set(v);o=o.filter(g=>!w.has(g[d]));break}case"n":o=o.filter(w=>w[d]==null);break;case"nn":o=o.filter(w=>w[d]!=null);break;case"lt":{const[w]=v;o=o.filter(g=>g[d]<w);break}case"lte":{const[w]=v;o=o.filter(g=>g[d]<=w);break}case"gt":{const[w]=v;o=o.filter(g=>g[d]>w);break}case"gte":{const[w]=v;o=o.filter(g=>g[d]>=w);break}default:throw new Error(`unknown filter type: ${h}`)}}for(const{column:h,direction:y}of function(d){if(typeof d[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(d).reverse()}(s.sort)){const d=y==="desc"?Ur:Pr;o===l&&(o=o.slice()),o.sort((v,w)=>d(v[h],w[h]))}let{from:p,to:b}=s.slice;p=p==null?0:Math.max(0,p),b=b==null?1/0:Math.max(0,b),(p>0||b<1/0)&&(o=o.slice(Math.max(0,p),Math.max(0,b)));let m=u.slice();if(s.select.columns){if(u){const h=new Map(u.map(y=>[y.name,y]));u=s.select.columns.map(y=>h.get(y))}o=o.map(h=>Object.fromEntries(s.select.columns.map(y=>[y,h[y]])))}if(s.names){const h=new Map(s.names.map(y=>[y.column,y]));u&&(u=u.map(y=>{const d=h.get(y.name);return{...y,...d?{name:d.name}:null}})),m&&(m=m.map(y=>{const d=h.get(y.name);return{...y,...d?{name:d.name}:null}})),o=rt(o,s)}return o!==l&&u&&(o.schema=u),o.fullSchema=m,o.errors=c,o}(e,t);throw e?new Error("invalid data source"):new Error("missing data source")},{sql:(e,t,n)=>async function(){return Xe(await Rr(await e,n),arguments,t)}});function Lt(e){const t=new WeakMap;return(n,r)=>{if(!n||typeof n!="object")throw new Error("invalid data source");let a=t.get(n);return(!a||pe(n)&&n.length!==a._numRows)&&(a=e(n,r),a._numRows=n.length,t.set(n,a)),a}}const kr=Lt(async(e,t)=>{if(e instanceof C){switch(e.mimeType){case"text/csv":return e.csv();case"text/tab-separated-values":return e.tsv();case"application/json":return e.json();case"application/x-sqlite3":return e.sqlite()}if(/\.(arrow|parquet)$/i.test(e.name))return B(e,t);throw new Error(`unsupported file type: ${e.mimeType}`)}return le(e)||Le(e)?B(e,t):pe(e)&&$t(e)?Array.from(e,n=>({value:n})):e}),Rr=Lt(async(e,t)=>{if(e instanceof C){switch(e.mimeType){case"text/csv":case"text/tab-separated-values":case"application/json":return B(e,t);case"application/x-sqlite3":return e.sqlite()}if(/\.(arrow|parquet)$/i.test(e.name))return B(e,t);throw new Error(`unsupported file type: ${e.mimeType}`)}return pe(e)?B(await async function(n,r){const a=await ke();return $t(n)?a.tableFromArrays({[r]:n}):a.tableFromJSON(n)}(e,t),t):le(e)||Le(e)?B(e,t):e});function B(e,t=e instanceof C?function(n){return n.name.replace(/@\d+(?=\.|$)/,"").replace(/\.\w+$/,"")}(e):"__table"){return Q.of({[t]:e})}async function Xe(e,t,n){if(!e)throw new Error("missing data source");if(typeof e.queryTag=="function"){const r=new AbortController,a={signal:r.signal};if(n.then(()=>r.abort("invalidated")),typeof e.queryStream=="function")return async function*(i){let o=performance.now();const s=await i,c=[];c.done=!1,c.error=null,c.schema=s.schema;try{for await(const l of s.readRows()){performance.now()-o>150&&c.length>0&&(yield c,o=performance.now());for(const f of l)c.push(f)}c.done=!0,yield c}catch(l){c.error=l,yield c}}(e.queryStream(...e.queryTag.apply(e,t),a));if(typeof e.query=="function")return e.query(...e.queryTag.apply(e,t),a)}if(typeof e.sql=="function")return e.sql.apply(e,t);throw new Error("source does not implement query, queryStream, or sql")}function Mr(e,t){if(typeof e=="object"){let n="";return e.database!=null&&(n+=t(e.database)+"."),e.schema!=null&&(n+=t(e.schema)+"."),n+=t(e.table),n}return t(e)}function _(e,t){const n=t[0];n[n.length-1]+=e}function et({column:e,direction:t},n,r){_(`${r(e)} ${t.toUpperCase()}`,n)}function Ir({type:e,operands:t},n,r){if(t.length<1)throw new Error("Invalid operand length");if(t.length===1||e==="v"||e==="nv")switch(D(t[0],n,r),e){case"n":case"nv":return void _(" IS NULL",n);case"nn":case"v":return void _(" IS NOT NULL",n);default:throw new Error("Invalid filter operation")}if(t.length!==2||["in","nin"].includes(e)){var a;switch(D(t[0],n,r),e){case"in":_(" IN (",n);break;case"nin":_(" NOT IN (",n);break;default:throw new Error("Invalid filter operation")}(function(i,o){let s=!0;for(const c of i)s?s=!1:_(",",o),o.push(c.value),o[0].push("")})(t.slice(1),n),_(")",n)}else{if(["c","nc"].includes(e)){switch(D(t[0],n,r),e){case"c":_(" LIKE ",n);break;case"nc":_(" NOT LIKE ",n)}return void D((a=t[1],{...a,value:`%${a.value}%`}),n,r)}switch(D(t[0],n,r),e){case"eq":_(" = ",n);break;case"ne":_(" <> ",n);break;case"gt":_(" > ",n);break;case"lt":_(" < ",n);break;case"gte":_(" >= ",n);break;case"lte":_(" <= ",n);break;default:throw new Error("Invalid filter operation")}D(t[1],n,r)}}function D(e,t,n){e.type==="column"?_(n(e.value),t):(t.push(e.value),t[0].push(""))}function kt(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))}function Pr(e,t){return kt(e,t)||(e<t?-1:e>t?1:0)}function Ur(e,t){return kt(e,t)||(e>t?-1:e<t?1:0)}const Dr=e=>typeof e=="number"&&!Number.isNaN(e),Br=e=>Number.isInteger(e)&&!Number.isNaN(e),Fr=e=>typeof e=="string",zr=e=>typeof e=="boolean",Hr=e=>typeof e=="bigint",Wr=e=>e instanceof Date&&!isNaN(e),Gr=e=>e instanceof ArrayBuffer,Vr=e=>Array.isArray(e),Yr=e=>typeof e=="object"&&e!==null,Zr=e=>e!=null;function tt(e){switch(e){case"string":return Fr;case"bigint":return Hr;case"boolean":return zr;case"number":return Dr;case"integer":return Br;case"date":return Wr;case"buffer":return Gr;case"array":return Vr;case"object":return Yr;default:return Zr}}const Rt=/^(([-+]\d{2})?\d{4}(-\d{2}(-\d{2}))|(\d{1,2})\/(\d{1,2})\/(\d{2,4}))([T ]\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function Jr(e,t){switch(t){case"string":return typeof e=="string"||e==null?e:String(e);case"boolean":if(typeof e=="string"){const n=e.trim().toLowerCase();return n==="true"||n!=="false"&&null}return typeof e=="boolean"||e==null?e:!!e;case"bigint":return typeof e=="bigint"||e==null?e:Number.isInteger(typeof e!="string"||e.trim()?+e:NaN)?BigInt(e):void 0;case"integer":case"number":return typeof e=="number"?e:e==null||typeof e=="string"&&!e.trim()?NaN:Number(e);case"date":{if(e instanceof Date||e==null)return e;if(typeof e=="number")return new Date(e);const n=String(e).trim();return typeof e!="string"||n?new Date(Rt.test(n)?n:NaN):null}case"array":case"object":case"buffer":case"other":return e;default:throw new Error(`Unable to coerce to type: ${t}`)}}function nt(e,t){const n=e;let{schema:r,inferred:a}=function(o){const{columns:s}=o;let{schema:c}=o;return At(c)?{schema:c,inferred:!1}:(c=Mt(o,St(s)?s:void 0),{schema:c,inferred:!0})}(e);const i=new Map(r.map(({name:o,type:s})=>[o,s]));if(t.types){for(const{name:o,type:s}of t.types){i.set(o,s),r===n.schema&&(r=r.slice());const c=r.findIndex(l=>l.name===o);c>-1&&(r[c]={...r[c],type:s})}e=e.map(o=>Se(o,i,r))}else a&&(e=e.map(o=>Se(o,i,r)));return{source:e,schema:r}}function rt(e,t){if(!t.names)return e;const n=new Map(t.names.map(r=>[r.column,r]));return e.map(r=>Object.fromEntries(Object.keys(r).map(a=>{var i;return[((i=n.get(a))==null?void 0:i.name)??a,r[a]]})))}function Se(e,t,n){const r={};for(const a of n){const i=t.get(a.name),o=e[a.name];r[a.name]=i==="raw"?o:Jr(o,i)}return r}const Kr=["boolean","integer","number","date","bigint","array","object","buffer"];function Mt(e,t=function(n){const r=new Set;for(const a of n)if(a)for(const i in a)Object.prototype.hasOwnProperty.call(a,i)&&r.add(i);return Array.from(r)}(e)){const n=[],r=e.slice(0,100);for(const a of t){const i={boolean:0,integer:0,number:0,date:0,string:0,array:0,object:0,bigint:0,buffer:0,defined:0};for(const c of r){let l=c[a];if(l==null)continue;const f=typeof l;if(f!=="string")++i.defined,Array.isArray(l)?++i.array:l instanceof Date?++i.date:l instanceof ArrayBuffer?++i.buffer:f==="number"?(++i.number,Number.isInteger(l)&&++i.integer):f in i&&++i[f];else{if(l=l.trim(),!l)continue;++i.defined,++i.string,/^(true|false)$/i.test(l)?++i.boolean:l&&!isNaN(l)?(++i.number,Number.isInteger(+l)&&++i.integer):Rt.test(l)&&++i.date}}const o=Math.max(1,.9*i.defined),s=Tr(Kr,c=>i[c]>=o?i[c]:NaN)??(i.string>=o?"string":"other");n.push({name:a,type:s,inferred:s})}return n}class Qr{constructor(t){Object.defineProperties(this,{_:{value:t},sheetNames:{value:t.worksheets.map(n=>n.name),enumerable:!0}})}sheet(t,n){const r=typeof t=="number"?this.sheetNames[t]:this.sheetNames.includes(t+="")?t:null;if(r==null)throw new Error(`Sheet not found: ${t}`);return function(a,{range:i,headers:o}={}){let[[s,c],[l,f]]=function(m=":",{columnCount:h,rowCount:y}){if(!(m+="").match(/^[A-Z]*\d*:[A-Z]*\d*$/))throw new Error("Malformed range specifier");const[[d=0,v=0],[w=h-1,g=y-1]]=m.split(":").map(ea);return[[d,v],[w,g]]}(i,a);const u=o?a._rows[c++]:null;let p=new Set(["#"]);for(let m=s;m<=l;m++){const h=u?at(u.findCell(m+1)):null;let y=h&&h+""||Xr(m);for(;p.has(y);)y+="_";p.add(y)}p=new Array(s).concat(Array.from(p));const b=new Array(f-c+1);for(let m=c;m<=f;m++){const h=b[m-c]=Object.create(null,{"#":{value:m+1}}),y=a.getRow(m+1);if(y.hasValues)for(let d=s;d<=l;d++){const v=at(y.findCell(d+1));v!=null&&(h[p[d+1]]=v)}}return b.columns=p.filter(()=>!0),b}(this._.getWorksheet(r),n)}}function at(e){if(!e)return;const{value:t}=e;if(t&&typeof t=="object"&&!(t instanceof Date)){if(t.formula||t.sharedFormula)return t.result&&t.result.error?NaN:t.result;if(t.richText)return it(t);if(t.text){let{text:n}=t;return n.richText&&(n=it(n)),t.hyperlink&&t.hyperlink!==n?`${t.hyperlink} ${n}`:n}return t}return t}function it(e){return e.richText.map(t=>t.text).join("")}function Xr(e){let t="";e++;do t=String.fromCharCode(64+(e%26||26))+t;while(e=Math.floor((e-1)/26));return t}function ea(e){const[,t,n]=e.match(/^([A-Z]*)(\d*)$/);let r=0;if(t)for(let a=0;a<t.length;a++)r+=Math.pow(26,t.length-a-1)*(t.charCodeAt(a)-64);return[r?r-1:void 0,n?+n-1:void 0]}async function j(e){const t=await fetch(await e.url());if(!t.ok)throw new Error(`Unable to load file: ${e.name}`);return t}async function ot(e,t,{array:n=!1,typed:r=!1}={}){const a=await e.text(),i=t==="	"?n?tr:er:n?Xn:Qn;if(r==="auto"&&!n){const o=i(a);return function(s,c){const l=new Map(c.map(({name:f,type:u})=>[f,u]));return Object.assign(s.map(f=>Se(f,l,c)),{schema:c})}(o,Mt(o,o.columns))}return i(a,r&&nr)}class Re{constructor(t,n){Object.defineProperty(this,"name",{value:t,enumerable:!0}),n!==void 0&&Object.defineProperty(this,"mimeType",{value:n+"",enumerable:!0})}async blob(){return(await j(this)).blob()}async arrayBuffer(){return(await j(this)).arrayBuffer()}async text(){return(await j(this)).text()}async json(){return(await j(this)).json()}async stream(){return(await j(this)).body}async csv(t){return ot(this,",",t)}async tsv(t){return ot(this,"	",t)}async image(t){const n=await this.url();return new Promise((r,a)=>{const i=new Image;new URL(n,document.baseURI).origin!==new URL(location).origin&&(i.crossOrigin="anonymous"),Object.assign(i,t),i.onload=()=>r(i),i.onerror=()=>a(new Error(`Unable to load file: ${this.name}`)),i.src=n})}async arrow({version:t=4}={}){switch(t){case 4:{const[n,r]=await Promise.all([P(Ce.resolve()),j(this)]);return n.Table.from(r)}case 9:{const[n,r]=await Promise.all([ae(()=>import(`${I}${hr.resolve()}`),[]),j(this)]);return n.tableFromIPC(r)}case 11:{const[n,r]=await Promise.all([ae(()=>import(`${I}${Et.resolve()}`),[]),j(this)]);return n.tableFromIPC(r)}default:throw new Error(`unsupported arrow version: ${t}`)}}async sqlite(){return K.open(j(this))}async zip(){const[t,n]=await Promise.all([P(ur.resolve()),this.arrayBuffer()]);return new na(await t.loadAsync(n))}async xml(t="application/xml"){return new DOMParser().parseFromString(await this.text(),t)}async html(){return this.xml("text/html")}async xlsx(){const[t,n]=await Promise.all([P(vr.resolve()),this.arrayBuffer()]);return new Qr(await new t.Workbook().xlsx.load(n))}}class C extends Re{constructor(t,n,r){super(n,r),Object.defineProperty(this,"_url",{value:t})}async url(){return await this._url+""}}function ta(e){throw new Error(`File not found: ${e}`)}class na{constructor(t){Object.defineProperty(this,"_",{value:t}),this.filenames=Object.keys(t.files).filter(n=>!t.files[n].dir)}file(t){const n=this._.file(t+="");if(!n||n.dir)throw new Error(`file not found: ${t}`);return new ra(n)}}class ra extends Re{constructor(t){super(t.name),Object.defineProperty(this,"_",{value:t}),Object.defineProperty(this,"_url",{writable:!0})}async url(){return this._url||(this._url=this.blob().then(URL.createObjectURL))}async blob(){return this._.async("blob")}async arrayBuffer(){return this._.async("arraybuffer")}async text(){return this._.async("text")}async json(){return JSON.parse(await this.text())}}var te={math:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},aa=0;function It(e){return new Pt("O-"+(e==null?"":e+"-")+ ++aa)}function Pt(e){this.id=e,this.href=new URL(`#${e}`,location)+""}Pt.prototype.toString=function(){return"url("+this.href+")"};var ia=Object.freeze({__proto__:null,canvas:function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n},context2d:function(e,t,n){n==null&&(n=devicePixelRatio);var r=document.createElement("canvas");r.width=e*n,r.height=t*n,r.style.width=e+"px";var a=r.getContext("2d");return a.scale(n,n),a},download:function(e,t="untitled",n="Save"){const r=document.createElement("a"),a=r.appendChild(document.createElement("button"));async function i(){await new Promise(requestAnimationFrame),URL.revokeObjectURL(r.href),r.removeAttribute("href"),a.textContent=n,a.disabled=!1}return a.textContent=n,r.download=t,r.onclick=async o=>{if(a.disabled=!0,r.href)return i();a.textContent="Saving…";try{const s=await(typeof e=="function"?e():e);a.textContent="Download",r.href=URL.createObjectURL(s)}catch{a.textContent=n}if(o.eventPhase)return i();a.disabled=!1},r},element:function(e,t){var n,r=e+="",a=r.indexOf(":");a>=0&&(r=e.slice(0,a))!=="xmlns"&&(e=e.slice(a+1));var i=te.hasOwnProperty(r)?document.createElementNS(te[r],e):document.createElement(e);if(t)for(var o in t)a=(r=o).indexOf(":"),n=t[o],a>=0&&(r=o.slice(0,a))!=="xmlns"&&(o=o.slice(a+1)),te.hasOwnProperty(r)?i.setAttributeNS(te[r],o,n):i.setAttribute(o,n);return i},input:function(e){var t=document.createElement("input");return e!=null&&(t.type=e),t},range:function(e,t,n){arguments.length===1&&(t=e,e=null);var r=document.createElement("input");return r.min=e=e==null?0:+e,r.max=t=t==null?1:+t,r.step=n==null?"any":n=+n,r.type="range",r},select:function(e){var t=document.createElement("select");return Array.prototype.forEach.call(e,function(n){var r=document.createElement("option");r.value=r.textContent=n,t.appendChild(r)}),t},svg:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("viewBox",[0,0,e,t]),n.setAttribute("width",e),n.setAttribute("height",t),n},text:function(e){return document.createTextNode(e)},uid:It}),oa=Object.freeze({__proto__:null,buffer:function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=n,r.readAsArrayBuffer(e)})},text:function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=n,r.readAsText(e)})},url:function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=n,r.readAsDataURL(e)})}});function Me(){return this}function st(e,t){let n=!1;if(typeof t!="function")throw new Error("dispose is not a function");return{[Symbol.iterator]:Me,next:()=>n?{done:!0}:(n=!0,{done:!1,value:e}),return:()=>(n=!0,t(e),{done:!0}),throw:()=>({done:n=!0})}}function ue(e){let t,n,r=!1;const a=e(function(i){return n?(n(i),n=null):r=!0,t=i});if(a!=null&&typeof a!="function")throw new Error(typeof a.then=="function"?"async initializers are not supported":"initializer returned something, but not a dispose function");return{[Symbol.iterator]:Me,throw:()=>({done:!0}),return:()=>(a!=null&&a(),{done:!0}),next:function(){return{done:!1,value:r?(r=!1,Promise.resolve(t)):new Promise(i=>n=i)}}}}function ct(e){switch(e.type){case"range":case"number":return e.valueAsNumber;case"date":return e.valueAsDate;case"checkbox":return e.checked;case"file":return e.multiple?e.files:e.files[0];case"select-multiple":return Array.from(e.selectedOptions,t=>t.value);default:return e.value}}var sa=Object.freeze({__proto__:null,disposable:st,filter:function*(e,t){for(var n,r=-1;!(n=e.next()).done;)t(n.value,++r)&&(yield n.value)},input:function(e){return ue(function(t){var n=function(i){switch(i.type){case"button":case"submit":case"checkbox":return"click";case"file":return"change";default:return"input"}}(e),r=ct(e);function a(){t(ct(e))}return e.addEventListener(n,a),r!==void 0&&t(r),function(){e.removeEventListener(n,a)}})},map:function*(e,t){for(var n,r=-1;!(n=e.next()).done;)yield t(n.value,++r)},observe:ue,queue:function(e){let t;const n=[],r=e(function(a){return n.push(a),t&&(t(n.shift()),t=null),a});if(r!=null&&typeof r!="function")throw new Error(typeof r.then=="function"?"async initializers are not supported":"initializer returned something, but not a dispose function");return{[Symbol.iterator]:Me,throw:()=>({done:!0}),return:()=>(r!=null&&r(),{done:!0}),next:function(){return{done:!1,value:n.length?Promise.resolve(n.shift()):new Promise(a=>t=a)}}}},range:function*(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n));++r<a;)yield e+r*n},valueAt:function(e,t){if(!(!isFinite(t=+t)||t<0||t!=t|0)){for(var n,r=-1;!(n=e.next()).done;)if(++r===t)return n.value}},worker:function(e){const t=URL.createObjectURL(new Blob([e],{type:"text/javascript"})),n=new Worker(t);return st(n,()=>{n.terminate(),URL.revokeObjectURL(t)})}});function Ie(e,t){return function(n){var r,a,i,o,s,c,l,f,u=n[0],p=[],b=null,m=-1;for(s=1,c=arguments.length;s<c;++s){if((r=arguments[s])instanceof Node)p[++m]=r,u+="<!--o:"+m+"-->";else if(Array.isArray(r)){for(l=0,f=r.length;l<f;++l)(a=r[l])instanceof Node?(b===null&&(p[++m]=b=document.createDocumentFragment(),u+="<!--o:"+m+"-->"),b.appendChild(a)):(b=null,u+=a);b=null}else u+=r;u+=n[s]}if(b=e(u),++m>0){for(i=new Array(m),o=document.createTreeWalker(b,NodeFilter.SHOW_COMMENT,null,!1);o.nextNode();)a=o.currentNode,/^o:/.test(a.nodeValue)&&(i[+a.nodeValue.slice(2)]=a);for(s=0;s<m;++s)(a=i[s])&&a.parentNode.replaceChild(p[s],a)}return b.childNodes.length===1?b.removeChild(b.firstChild):b.nodeType===11?((a=t()).appendChild(b),a):b}}const ca=Ie(function(e){var t=document.createElement("template");return t.innerHTML=e.trim(),document.importNode(t.content,!0)},function(){return document.createElement("span")});function la(e){let t;Object.defineProperties(this,{generator:{value:ue(n=>{t=n})},value:{get:()=>e,set:n=>t(e=n)}}),e!==void 0&&t(e)}function*ua(){for(;;)yield Date.now()}var we=new Map;function lt(e,t){var n;return(n=we.get(e=+e))?n.then(()=>t):(n=Date.now())>=e?Promise.resolve(t):function(r,a){var i=new Promise(function(o){we.delete(a);var s=a-r;if(!(s>0))throw new Error("invalid time");if(s>2147483647)throw new Error("too long to wait");setTimeout(o,s)});return we.set(a,i),i}(n,e).then(()=>t)}var fa=Object.freeze({__proto__:null,delay:function(e,t){return new Promise(function(n){setTimeout(function(){n(t)},e)})},tick:function(e,t){return lt(Math.ceil((Date.now()+1)/e)*e,t)},when:lt});function da(e,t){if(/^(\w+:)|\/\//i.test(e))return e;if(/^[.]{0,2}\//i.test(e))return new URL(e,t??location).href;if(!e.length||/^[\s._]/.test(e)||/\s$/.test(e))throw new Error("illegal name");return"https://unpkg.com/"+e}const pa=Ie(function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.innerHTML=e.trim(),t},function(){return document.createElementNS("http://www.w3.org/2000/svg","g")});var ma=String.raw;function ha(e){return new Promise(function(t,n){var r=document.createElement("link");r.rel="stylesheet",r.href=e,r.onerror=n,r.onload=t,document.head.appendChild(r)})}function ba(){return ue(function(e){var t=e(document.body.clientWidth);function n(){var r=document.body.clientWidth;r!==t&&e(t=r)}return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}})}const ya=Object.assign(Object.defineProperties(function(e){const t=function(r){return r==null?P:ce(r)}(e);var n;Object.defineProperties(this,(n={FileAttachment:()=>ta,Mutable:()=>la,now:ua,width:ba,dot:()=>t(sr.resolve()),htl:()=>t(lr.resolve()),html:()=>ca,md:()=>function(r){return r(fr.resolve()).then(function(a){return Ie(function(i){var o=document.createElement("div");o.innerHTML=a(i,{langPrefix:""}).trim();var s=o.querySelectorAll("pre code[class]");return s.length>0&&r(he.resolve()).then(function(c){s.forEach(function(l){function f(){c.highlightBlock(l),l.parentNode.classList.add("observablehq--md-pre")}c.getLanguage(l.className)?f():r(he.resolve("async-languages/index.js")).then(u=>{if(u.has(l.className))return r(he.resolve("async-languages/"+u.get(l.className))).then(p=>{c.registerLanguage(l.className,p)})}).then(f,f)})}),o},function(){return document.createElement("div")})})}(t),svg:()=>pa,tex:()=>function(r){return Promise.all([r(Ge.resolve()),r.resolve(Ge.resolve("dist/katex.min.css")).then(ha)]).then(function(a){var i=a[0],o=s();function s(c){return function(){var l=document.createElement("div");return i.render(ma.apply(String,arguments),l,c),l.removeChild(l.firstChild)}}return o.options=s,o.block=s({displayMode:!0}),o})}(t),_:()=>t(cr.resolve()),aq:()=>t.alias({"apache-arrow":Ce.resolve()})(br.resolve()),Arrow:()=>t(Ce.resolve()),d3:()=>t(ar.resolve()),DuckDBClient:()=>Q,Inputs:()=>t(ir.resolve()).then(r=>({...r,file:r.fileOf(Re)})),L:()=>async function(r){const a=await r(Ye.resolve());if(!a._style){const i=document.createElement("link");i.rel="stylesheet",i.href=await r.resolve(Ye.resolve("dist/leaflet.css")),a._style=document.head.appendChild(i)}return a}(t),mermaid:()=>async function(r){const a=await r(wr.resolve());return a.initialize({securityLevel:"loose",theme:"neutral"}),function(){const i=document.createElement("div");return i.innerHTML=a.render(It().id,String.raw.apply(String,arguments)),i.removeChild(i.firstChild)}}(t),Plot:()=>t(or.resolve()),__query:()=>Ot,require:()=>t,resolve:()=>da,SQLite:()=>Nt(t),SQLiteDatabaseClient:()=>K,topojson:()=>t(yr.resolve()),vl:()=>async function(r){const[a,i,o]=await Promise.all([dr,pr,mr].map(s=>r(s.resolve())));return o.register(a,i)}(t),aapl:()=>new C("https://static.observableusercontent.com/files/3ccff97fd2d93da734e76829b2b066eafdaac6a1fafdec0faf6ebc443271cfc109d29e80dd217468fcb2aff1e6bffdc73f356cc48feb657f35378e6abbbb63b9").csv({typed:!0}),alphabet:()=>new C("https://static.observableusercontent.com/files/75d52e6c3130b1cae83cda89305e17b50f33e7420ef205587a135e8562bcfd22e483cf4fa2fb5df6dff66f9c5d19740be1cfaf47406286e2eb6574b49ffc685d").csv({typed:!0}),cars:()=>new C("https://static.observableusercontent.com/files/048ec3dfd528110c0665dfa363dd28bc516ffb7247231f3ab25005036717f5c4c232a5efc7bb74bc03037155cb72b1abe85a33d86eb9f1a336196030443be4f6").csv({typed:!0}),citywages:()=>new C("https://static.observableusercontent.com/files/39837ec5121fcc163131dbc2fe8c1a2e0b3423a5d1e96b5ce371e2ac2e20a290d78b71a4fb08b9fa6a0107776e17fb78af313b8ea70f4cc6648fad68ddf06f7a").csv({typed:!0}),diamonds:()=>new C("https://static.observableusercontent.com/files/87942b1f5d061a21fa4bb8f2162db44e3ef0f7391301f867ab5ba718b225a63091af20675f0bfe7f922db097b217b377135203a7eab34651e21a8d09f4e37252").csv({typed:!0}),flare:()=>new C("https://static.observableusercontent.com/files/a6b0d94a7f5828fd133765a934f4c9746d2010e2f342d335923991f31b14120de96b5cb4f160d509d8dc627f0107d7f5b5070d2516f01e4c862b5b4867533000").csv({typed:!0}),industries:()=>new C("https://static.observableusercontent.com/files/76f13741128340cc88798c0a0b7fa5a2df8370f57554000774ab8ee9ae785ffa2903010cad670d4939af3e9c17e5e18e7e05ed2b38b848ac2fc1a0066aa0005f").csv({typed:!0}),miserables:()=>new C("https://static.observableusercontent.com/files/31d904f6e21d42d4963ece9c8cc4fbd75efcbdc404bf511bc79906f0a1be68b5a01e935f65123670ed04e35ca8cae3c2b943f82bf8db49c5a67c85cbb58db052").json(),olympians:()=>new C("https://static.observableusercontent.com/files/31ca24545a0603dce099d10ee89ee5ae72d29fa55e8fc7c9ffb5ded87ac83060d80f1d9e21f4ae8eb04c1e8940b7287d179fe8060d887fb1f055f430e210007c").csv({typed:!0}),penguins:()=>new C("https://static.observableusercontent.com/files/715db1223e067f00500780077febc6cebbdd90c151d3d78317c802732252052ab0e367039872ab9c77d6ef99e5f55a0724b35ddc898a1c99cb14c31a379af80a").csv({typed:!0}),pizza:()=>new C("https://static.observableusercontent.com/files/c653108ab176088cacbb338eaf2344c4f5781681702bd6afb55697a3f91b511c6686ff469f3e3a27c75400001a2334dbd39a4499fe46b50a8b3c278b7d2f7fb5").csv({typed:!0}),weather:()=>new C("https://static.observableusercontent.com/files/693a46b22b33db0f042728700e0c73e836fa13d55446df89120682d55339c6db7cc9e574d3d73f24ecc9bc7eb9ac9a1e7e104a1ee52c00aab1e77eb102913c1f").csv({typed:!0}),DOM:ia,Files:oa,Generators:sa,Promises:fa},Object.fromEntries(Object.entries(n).map(va))))},{resolve:{get:()=>P.resolve,enumerable:!0,configurable:!0},require:{get:()=>P,set:function(e){P=e},enumerable:!0,configurable:!0}}),{resolveFrom:xt,requireFrom:ce});function va([e,t]){return[e,{value:t,writable:!0,enumerable:!0}]}class k extends Error{constructor(t,n){super(t),this.input=n}}function $e(e){return()=>e}function re(e){return e}k.prototype.name="RuntimeError";const wa=Array.prototype.map;function R(){}const Y=Symbol("no-observer");function U(e,t,n,r){var a;n||(n=Y),Object.defineProperties(this,{_observer:{value:n,writable:!0},_definition:{value:Te,writable:!0},_duplicate:{value:void 0,writable:!0},_duplicates:{value:void 0,writable:!0},_indegree:{value:NaN,writable:!0},_inputs:{value:[],writable:!0},_invalidate:{value:R,writable:!0},_module:{value:t},_name:{value:null,writable:!0},_outputs:{value:new Set,writable:!0},_promise:{value:Promise.resolve(void 0),writable:!0},_reachable:{value:n!==Y,writable:!0},_rejector:{value:(a=this,i=>{throw i===O?i:i===Te?new k(`${a._name} is not defined`,a._name):i instanceof Error&&i.message?new k(i.message,a._name):new k(`${a._name} could not be resolved`,a._name)})},_shadow:{value:ga(t,r)},_type:{value:e},_value:{value:void 0,writable:!0},_version:{value:0,writable:!0}})}function ga(e,t){return t!=null&&t.shadow?new Map(Object.entries(t.shadow).map(([n,r])=>[n,new U(2,e).define([],r)])):null}function _a(e){e._module._runtime._dirty.add(e),e._outputs.add(this)}function Ea(e){e._module._runtime._dirty.add(e),e._outputs.delete(this)}function Te(){throw Te}function O(){throw O}function ut(e){return()=>{throw new k(`${e} is defined more than once`)}}function ge(e,t,n){const r=this._module._scope,a=this._module._runtime;if(this._inputs.forEach(Ea,this),t.forEach(_a,this),this._inputs=t,this._definition=n,this._value=void 0,n===R?a._variables.delete(this):a._variables.add(this),e!==this._name||r.get(e)!==this){let i,o;if(this._name)if(this._outputs.size)r.delete(this._name),o=this._module._resolve(this._name),o._outputs=this._outputs,this._outputs=new Set,o._outputs.forEach(function(s){s._inputs[s._inputs.indexOf(this)]=o},this),o._outputs.forEach(a._updates.add,a._updates),a._dirty.add(o).add(this),r.set(this._name,o);else if((o=r.get(this._name))===this)r.delete(this._name);else{if(o._type!==3)throw new Error;o._duplicates.delete(this),this._duplicate=void 0,o._duplicates.size===1&&(o=o._duplicates.keys().next().value,i=r.get(this._name),o._outputs=i._outputs,i._outputs=new Set,o._outputs.forEach(function(s){s._inputs[s._inputs.indexOf(i)]=o}),o._definition=o._duplicate,o._duplicate=void 0,a._dirty.add(i).add(o),a._updates.add(o),r.set(this._name,o))}if(this._outputs.size)throw new Error;e&&((o=r.get(e))?o._type===3?(this._definition=ut(e),this._duplicate=n,o._duplicates.add(this)):o._type===2?(this._outputs=o._outputs,o._outputs=new Set,this._outputs.forEach(function(s){s._inputs[s._inputs.indexOf(o)]=this},this),a._dirty.add(o).add(this),r.set(e,this)):(o._duplicate=o._definition,this._duplicate=n,i=new U(3,this._module),i._name=e,i._definition=this._definition=o._definition=ut(e),i._outputs=o._outputs,o._outputs=new Set,i._outputs.forEach(function(s){s._inputs[s._inputs.indexOf(o)]=i}),i._duplicates=new Set([this,o]),a._dirty.add(o).add(i),a._updates.add(o).add(i),r.set(e,i)):r.set(e,this)),this._name=e}return this._version>0&&++this._version,a._updates.add(this),a._compute(),this}Object.defineProperties(U.prototype,{_pending:{value:function(){this._observer.pending&&this._observer.pending()},writable:!0,configurable:!0},_fulfilled:{value:function(e){this._observer.fulfilled&&this._observer.fulfilled(e,this._name)},writable:!0,configurable:!0},_rejected:{value:function(e){this._observer.rejected&&this._observer.rejected(e,this._name)},writable:!0,configurable:!0},_resolve:{value:function(e){var t;return((t=this._shadow)==null?void 0:t.get(e))??this._module._resolve(e)},writable:!0,configurable:!0},define:{value:function(e,t,n){switch(arguments.length){case 1:n=e,e=t=null;break;case 2:n=t,typeof e=="string"?t=null:(t=e,e=null)}return ge.call(this,e==null?null:String(e),t==null?[]:wa.call(t,this._resolve,this),typeof n=="function"?n:$e(n))},writable:!0,configurable:!0},delete:{value:function(){return ge.call(this,null,[],R)},writable:!0,configurable:!0},import:{value:function(e,t,n){return arguments.length<3&&(n=t,t=e),ge.call(this,String(t),[n._resolve(String(e))],re)},writable:!0,configurable:!0}});const Ut=Symbol("variable"),Dt=Symbol("invalidation"),Bt=Symbol("visibility");function fe(e,t=[]){Object.defineProperties(this,{_runtime:{value:e},_scope:{value:new Map},_builtins:{value:new Map([["@variable",Ut],["invalidation",Dt],["visibility",Bt],...t])},_source:{value:null,writable:!0}})}async function qe(e,t){await e._compute();try{return await t._promise}catch(n){if(n===O)return qe(e,t);throw n}}function xa(e){return e._name}Object.defineProperties(fe.prototype,{_resolve:{value:function(e){let t,n=this._scope.get(e);if(!n)if(n=new U(2,this),this._builtins.has(e))n.define(e,$e(this._builtins.get(e)));else if(this._runtime._builtin._scope.has(e))n.import(e,this._runtime._builtin);else{try{t=this._runtime._global(e)}catch(r){return n.define(e,function(a){return()=>{throw a}}(r))}t===void 0?this._scope.set(n._name=e,n):n.define(e,$e(t))}return n},writable:!0,configurable:!0},redefine:{value:function(e){const t=this._scope.get(e);if(!t)throw new k(`${e} is not defined`);if(t._type===3)throw new k(`${e} is defined more than once`);return t.define.apply(t,arguments)},writable:!0,configurable:!0},define:{value:function(){const e=new U(1,this);return e.define.apply(e,arguments)},writable:!0,configurable:!0},derive:{value:function(e,t){const n=new Map,r=new Set,a=[];function i(s){let c=n.get(s);return c||(c=new fe(s._runtime,s._builtins),c._source=s,n.set(s,c),a.push([c,s]),r.add(s),c)}const o=i(this);for(const s of e){const{alias:c,name:l}=typeof s=="object"?s:{name:s};o.import(l,c??l,t)}for(const s of r)for(const[c,l]of s._scope)if(l._definition===re){if(s===this&&o._scope.has(c))continue;const f=l._inputs[0]._module;f._source&&i(f)}for(const[s,c]of a)for(const[l,f]of c._scope){const u=s._scope.get(l);if(!u||u._type===2)if(f._definition===re){const p=f._inputs[0],b=p._module;s.import(p._name,l,n.get(b)||b)}else s.define(l,f._inputs.map(xa),f._definition)}return o},writable:!0,configurable:!0},import:{value:function(){const e=new U(1,this);return e.import.apply(e,arguments)},writable:!0,configurable:!0},value:{value:async function(e){let t=this._scope.get(e);if(!t)throw new k(`${e} is not defined`);if(t._observer!==Y)return qe(this._runtime,t);t=this.variable(!0).define([e],re);try{return await qe(this._runtime,t)}finally{t.delete()}},writable:!0,configurable:!0},variable:{value:function(e,t){return new U(1,this,e,t)},writable:!0,configurable:!0},builtin:{value:function(e,t){this._builtins.set(e,t)},writable:!0,configurable:!0}});const Ca=typeof requestAnimationFrame=="function"?requestAnimationFrame:typeof setImmediate=="function"?setImmediate:e=>setTimeout(e,0);function Ft(e=new ya,t=Oa){const n=this.module();if(Object.defineProperties(this,{_dirty:{value:new Set},_updates:{value:new Set},_precomputes:{value:[],writable:!0},_computing:{value:null,writable:!0},_init:{value:null,writable:!0},_modules:{value:new Map},_variables:{value:new Set},_disposed:{value:!1,writable:!0},_builtin:{value:n},_global:{value:t}}),e)for(const r in e)new U(2,n).define(r,[],e[r])}function Na(e){const t=new Set(e._inputs);for(const n of t){if(n===e)return!0;n._inputs.forEach(t.add,t)}return!1}function Aa(e){++e._indegree}function Sa(e){--e._indegree}function $a(e){return e._promise.catch(e._rejector)}function _e(e){return new Promise(function(t){e._invalidate=t})}function Ta(e,t){let n,r,a=typeof IntersectionObserver=="function"&&t._observer&&t._observer._node,i=!a,o=R,s=R;return a&&(r=new IntersectionObserver(([c])=>(i=c.isIntersecting)&&(n=null,o())),r.observe(a),e.then(()=>(r.disconnect(),r=null,s()))),function(c){return i?Promise.resolve(c):r?(n||(n=new Promise((l,f)=>(o=l,s=f))),n.then(()=>c)):Promise.reject()}}function qa(e){e._invalidate(),e._invalidate=R,e._pending();const t=e._value,n=++e._version;let r=null;(e._promise=(e._inputs.length?Promise.all(e._inputs.map($a)).then(function(i){if(e._version!==n)throw O;for(let o=0,s=i.length;o<s;++o)switch(i[o]){case Dt:i[o]=r=_e(e);break;case Bt:r||(r=_e(e)),i[o]=Ta(r,e);break;case Ut:i[o]=e}return e._definition.apply(t,i)}):new Promise(i=>i(e._definition.call(t)))).then(function(i){if(e._version!==n)throw O;if(function(s){return s&&typeof s.next=="function"&&typeof s.return=="function"}(i))return(r||_e(e)).then((o=i,function(){o.return()})),function(s,c,l){const f=s._module._runtime;let u;function p(h){return new Promise(y=>y(l.next(u))).then(({done:y,value:d})=>y?void 0:Promise.resolve(d).then(h))}function b(){const h=p(y=>{if(s._version!==c)throw O;return u=y,m(y,h).then(()=>f._precompute(b)),s._fulfilled(y),y});h.catch(y=>{y!==O&&s._version===c&&(m(void 0,h),s._rejected(y))})}function m(h,y){return s._value=h,s._promise=y,s._outputs.forEach(f._updates.add,f._updates),f._compute()}return p(h=>{if(s._version!==c)throw O;return u=h,f._precompute(b),h})}(e,n,i);var o;return i})).then(i=>{e._value=i,e._fulfilled(i)},i=>{i!==O&&e._version===n&&(e._value=void 0,e._rejected(i))})}function ja(e,t){e._invalidate(),e._invalidate=R,e._pending(),++e._version,e._indegree=NaN,(e._promise=Promise.reject(t)).catch(R),e._value=void 0,e._rejected(t)}function Oa(e){return globalThis[e]}Object.defineProperties(Ft.prototype,{_precompute:{value:function(e){this._precomputes.push(e),this._compute()},writable:!0,configurable:!0},_compute:{value:function(){return this._computing||(this._computing=this._computeSoon())},writable:!0,configurable:!0},_computeSoon:{value:function(){return new Promise(Ca).then(()=>this._disposed?void 0:this._computeNow())},writable:!0,configurable:!0},_computeNow:{value:async function(){let e,t,n=[],r=this._precomputes;if(r.length){this._precomputes=[];for(const i of r)i();await function(i=0){let o=Promise.resolve();for(let s=0;s<i;++s)o=o.then(()=>{});return o}(3)}e=new Set(this._dirty),e.forEach(function(i){i._inputs.forEach(e.add,e);const o=function(s){if(s._observer!==Y)return!0;const c=new Set(s._outputs);for(const l of c){if(l._observer!==Y)return!0;l._outputs.forEach(c.add,c)}return!1}(i);o>i._reachable?this._updates.add(i):o<i._reachable&&i._invalidate(),i._reachable=o},this),e=new Set(this._updates),e.forEach(function(i){i._reachable?(i._indegree=0,i._outputs.forEach(e.add,e)):(i._indegree=NaN,e.delete(i))}),this._computing=null,this._updates.clear(),this._dirty.clear(),e.forEach(function(i){i._outputs.forEach(Aa)});do{for(e.forEach(function(i){i._indegree===0&&n.push(i)});t=n.pop();)qa(t),t._outputs.forEach(a),e.delete(t);e.forEach(function(i){Na(i)&&(ja(i,new k("circular definition")),i._outputs.forEach(Sa),e.delete(i))})}while(e.size);function a(i){--i._indegree==0&&n.push(i)}},writable:!0,configurable:!0},dispose:{value:function(){this._computing=Promise.resolve(),this._disposed=!0,this._variables.forEach(e=>{e._invalidate(),e._version=NaN})},writable:!0,configurable:!0},module:{value:function(e,t=R){let n;if(e===void 0)return(n=this._init)?(this._init=null,n):new fe(this);if(n=this._modules.get(e),n)return n;this._init=n=new fe(this),this._modules.set(e,n);try{e(this,t)}finally{this._init=null}return n},writable:!0,configurable:!0},fileAttachments:{value:function(e){return Object.assign(t=>{const n=e(t+="");if(n==null)throw new Error(`File not found: ${t}`);if(typeof n=="object"&&"url"in n){const{url:r,mimeType:a}=n;return new C(r,t,a)}return new C(n,t)},{prototype:C.prototype})},writable:!0,configurable:!0}});const La=new Ft;La.module(bn,xe.into(document.body));
